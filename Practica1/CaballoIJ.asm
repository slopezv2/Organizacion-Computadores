#SimuProc 1.4.2.0
MSG Menu ;Inicio
MSG  ---------
MSG  |1|2|3|4|
MSG  ---------
MSG  |5|6|7|8|
MSG  ---------
MSG  |9|10|11|12|
MSG  --------
MSG  |13|14|15|16|
MSG  --------
MSG 1. Ingresar posicion inicial para el caballo (ver matriz de arriba)
MSG 2. Llenado de la matriz mediante saltos de caballo
MSG 3. Mostrar Contenido de la matriz
LDT Ingrese la opcion(1, 2 o 3) ; Le pide input a usuario
CMP A02 ; compara con 2
JME 100 ; si menor que 2, o sea 1 salta
JMA 250;TODO CREAR NUEVA OPCION
HLT   ;Salir del programa
#100
LDT INGRESE EL NUMERO DE LA CASILLA (1-16)  ;input casilla
PUSH AX  ;Meter en pila
STA 19C  ; me guarda em la variable de pos cual elemento ingreso usuario
INC 19D  ; incrementar contador de pila
#104
; Conversion de numero a coord i j matriz
DIV A04      ;division por 4
STA 19E      ; guardo resultado
MOV AX,BX    ; paso a ax el modulo
CMP A00      ; si modulo es cero
JMA 146      ; Si no es calculo sencillo
MOV AA1,A04  ; set pos j variable
MOV AA0,19E  ; set pos i variable
MOV 19A,A00  ; set pos i estatica
MOV 19B,AA1  ; set pos i estatica
MOV 19E,A00  ;limpiar varible aux
JMP 020       ; voy a buscar posibles saltos
#110
;PASAR DE COORD I J A NUMERO
LDA AA0
DEC AX
MUL A04
STA 19E
LDA AA1
ADD 19E
STA 19C
JMP 120
#120
;REVISAR SI ESTA EN PILA
MOV CX,19D
MOV BX,A01
LDB F7F
CMP 19C
JME 126
JEQ 135
INC BX
LOOP 122
LDA 19C
PUSH AX;INSERTAR EN PILA
EAP
MOV 199,A00
INC 19D
LDA 19D
CMP A0A  ; MIRAR SI LLEVO 16 ELEMENTOS
JEQ 00A
MOV 19A,AA0
MOV 19B,AA1
JMP 020

#146
INC 19E
STA AA1
MOV AA0,19E
MOV 19B,AA1
MOV 19A,AA0
MOV 19E,A00
JMP 020
#135
; BUSCAR OTRA POSIBLE JUGADA
LDA 19F
CMP A08
JEQ 030
CMP A07
JEQ 040
CMP A06
JEQ 050
CMP A05
JEQ 05E
CMP A04
JEQ 070
CMP A03
JEQ 080
CMP A02
JEQ 090
JMP 150
#150
;RollbacK
INC 199
LDA 19D
SUB 199
MOV BX,AX
LDB F7F
MSG Rollback!
EAP
STA 19C
MOV 19F,A08
JMP 104
#020
;MOVIMIENTO 8: 2 izquierda, 1 abajo
MOV 19F,A08
MOV AA0,19A
MOV AA1,19B
CLA
LDA 19A
ADD A01
STA AA0
LDA 19B
CMP A02
JME 030
JEQ 030
SUB A02
STA AA1
JMP B00

#030
;MOVIMIENTO 7:  2 derecha, 1 abajo
MOV 19F,A07
MOV AA0,19A
MOV AA1,19B
CLA
LDA AA0
ADD A01
STA AA0
LDA AA1
ADD A02
STA AA1
JMP B10
#040
;MOVIMIENTO 6: 2 abajo, 1 izquierda
MOV 19F,A06
MOV AA0,19A
MOV AA1,19B
CLA
LDA AA0
ADD A02
STA AA0
LDA AA1
CMP A01
JEQ 050
JME 050
SUB A01
STA AA1
JMP B20

#050
;Movimiento 5 : 2 abajo, 1 derecha
MOV 19F,A05
MOV AA0,19A
MOV AA1,19B
CLA
LDA AA0
ADD A02
STA AA0
LDA AA1
ADD A01
STA AA1
JMP B30

#05E
;Movimiento 4 : 1 arriba, 2 izquierda
MOV 19F,A04
MOV AA0,19A
MOV AA1,19B
CLA
LDA AA0
CMP A01
JME 070
JEQ 070
SUB A01
STA AA0
LDA AA1
CMP A02
JME 070
JEQ 070
SUB A02
STA AA1
JMP B40

#070
;Movimiento 3  ; 1 arriba, 2 derecha
MOV 19F,A03
MOV AA0,19A
MOV AA1,19B
CLA
LDA AA0
CMP A01
JME 080
JEQ 080
SUB A01
STA AA0
LDA AA1
ADD A02
STA AA1
JMP B50

#080
;Movimiento 2  ; dos arriba, una derecha
MOV 19F,A02
MOV AA0,19A
MOV AA1,19B
CLA
LDA AA0
CMP A02
JME 090
JEQ 090
SUB A02
STA AA0
LDA AA1
ADD A01
STA AA1
JMP B60

#090
;MovImiento 1  ; dos arriba, 1 izquierda
MOV 19F,A01
MOV AA0,19A
MOV AA1,19B
CLA
LDA AA0
CMP A02
JME 150
JEQ 150
SUB A02
;TODO VALIDAR Y PASAR A ROLLBACK
STA AA0
LDA AA1
CMP A01
JME 011
SUB A01
STA AA1
JMP B70

#B00
;VERIFICAR MOV 6 I >0 && I <= 4
LDA AA0
CMP A01
JME 030
CMP A04
JMA 030
;VERIFICAR MOV 6 J > 0 && J <= 4
LDA AA1
CMP A01
JME 030
CMP A04
JMA 030
JMP 110

#B10
;VERIFICAR MOV 7 I >0 && I <= 4
LDA AA0
CMP A01
JME 040
CMP A04
JMA 040
;VERIFICAR MOV 7 J > 0 && J <= 4
LDA AA1
CMP A01
JME 040
CMP A04
JMA 040
JMP 110


#B20
;VERIFICAR MOV 6 I >0 && I <= 4
LDA AA0
CMP A01
JME 050
CMP A04
JMA 050
;VERIFICAR MOV 6 J > 0 && J <= 4
LDA AA1
CMP A01
JME 050
CMP A04
JMA 050
JMP 110
#B30
;VERIFICAR MOV 5 I >0 && I <= 4
LDA AA0
CMP A01
JME 05E
CMP A04
JMA 05E
;VERIFICAR MOV 5 J > 0 && J <= 4
LDA AA1
CMP A01
JME 05E
CMP A04
JMA 05E
JMP 110
#B40
;VERIFICAR MOV 4 I >0 && I <= 4
LDA AA0
CMP A01
JME 070
CMP A04
JMA 070
;VERIFICAR MOV 4 J > 0 && J <= 4
LDA AA1
CMP A01
JME 070
CMP A04
JMA 070
JMP 110
#B50
;VERIFICAR MOV 3 I >0 && I <= 4
LDA AA0
CMP A01
JME 080
CMP A04
JMA 080
;VERIFICAR MOV 3 J > 0 && J <= 4
LDA AA1
CMP A01
JME 080
CMP A04
JMA 080
JMP 110

#B60
;VERIFICAR MOV 2 I >0 && I <= 4
LDA AA0
CMP A01
JME 090
CMP A04
JMA 090
;VERIFICAR MOV 2 J > 0 && J <= 4
LDA AA1
CMP A01
JME 090
CMP A04
JMA 090
JMP 110

#B70
;VERIFICAR MOV 1 I >0 && I <= 4
LDA AA0
CMP A01
JME 150
CMP A04
JMA 150
;VERIFICAR MOV 1 J > 0 && J <= 4
LDA AA1
CMP A01
JME 150
CMP A04
JMA 150
JMP 110


#250
LDA A00
CMP 19D
JEQ 260
MOV CX,19D
MSG SALTOS REALIZADOS:
MOV BX,A01
LDB F7F
EAP
INC BX
LOOP 256
JMP 00A


#260
MSG No se ha llenado el arreglo
JMP 00A

#AA0
0000000000000000;SALVAR I
#AA1
0000000000000000;SALVAR J
#199
0000000000000000; CONTADOR DE ROLLBACK
#19A
0000000000000000;i
#19B
0000000000000000;j
#19C
0000000000000000;AUX posActual
#19D
0000000000000000;CONTADOR
#19E
0000000000000000;AUXILIAR SUMA
#19F
0000000000000000;AUXILIAR MOV
#A00
0000000000000000;NUMERO 0
0000000000000001;NUMERO 1
0000000000000010;NUMERO 2
0000000000000011;NUMERO 3
0000000000000100;NUMERO 4
0000000000000101;NUMERO 5 **
0000000000000110;NUMERO 6
0000000000000111;NUMERO 7
0000000000001000;NUMERO 8
0000000000001001;NUMERO 9
0000000000010000;NUMERO 16
